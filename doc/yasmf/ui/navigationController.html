<!DOCTYPE html>

<html>
<head>
  <title>navigationController.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>navigationController.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 *
 * Navigation Controllers provide basic support for view stack management (as in push, pop)
 *
 * @module navigationController.js
 * @author Kerri Shotts
 * @version 0.5
 * ```
 * Copyright (c) 2013 Kerri Shotts, photoKandy Studios LLC
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this
 * software and associated documentation files (the "Software"), to deal in the Software
 * without restriction, including without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to the following
 * conditions:
 * The above copyright notice and this permission notice shall be included in all copies
 * or substantial portions of the Software.
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
 * PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT
 * OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 * ```
 */</span>
<span class="hljs-comment">/*global module*/</span>
<span class="hljs-pi">"use strict"</span>;
<span class="hljs-keyword">var</span> UI = <span class="hljs-built_in">require</span>( <span class="hljs-string">"./core"</span> ),
  ViewContainer = <span class="hljs-built_in">require</span>( <span class="hljs-string">"./viewContainer"</span> ),
  UTIL = <span class="hljs-built_in">require</span>( <span class="hljs-string">"../util/core"</span> );
<span class="hljs-keyword">var</span> _className = <span class="hljs-string">"NavigationController"</span>,
  NavigationController = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">new</span> ViewContainer();
    self.subclass( _className );</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="notifications">Notifications</h1>
<ul>
<li><code>viewPushed</code> is fired when a view is pushed onto the view stack. The view pushed is passed as a parameter.</li>
<li><code>viewPopped</code> is fired when a view is popped off the view stack. The view popped is passed as a parameter.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.registerNotification( <span class="hljs-string">"viewPushed"</span> );
    self.registerNotification( <span class="hljs-string">"viewPopped"</span> );
    <span class="hljs-comment">/**
     * The array of views that this navigation controller manages.
     * @property subviews
     * @type {Array}
     */</span>
    self.defineProperty( <span class="hljs-string">"subviews"</span>, {
      read:    <span class="hljs-literal">true</span>,
      write:   <span class="hljs-literal">false</span>,
      <span class="hljs-keyword">default</span>: []
    } );
    <span class="hljs-comment">/**
     * Indicates the current top view
     * @property topView
     * @type {Object}
     */</span>
    self.getTopView = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">if</span> ( self._subviews.length &gt; <span class="hljs-number">0</span> ) {
        <span class="hljs-keyword">return</span> self._subviews[self._subviews.length - <span class="hljs-number">1</span>];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
    };
    self.defineProperty( <span class="hljs-string">"topView"</span>, {
      read:            <span class="hljs-literal">true</span>,
      write:           <span class="hljs-literal">false</span>,
      backingVariable: <span class="hljs-literal">false</span>
    } );
    <span class="hljs-comment">/**
     * Returns the initial view in the view stack
     * @property rootView
     * @type {Object}
     */</span>
    self.getRootView = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">if</span> ( self._subviews.length &gt; <span class="hljs-number">0</span> ) {
        <span class="hljs-keyword">return</span> self._subviews[<span class="hljs-number">0</span>];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
    };
    self.setRootView = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( theNewRoot )</span> </span>{
      <span class="hljs-keyword">if</span> ( self._subviews.length &gt; <span class="hljs-number">0</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>must remove all the subviews from the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; self._subviews.length; i++ ) {
          <span class="hljs-keyword">var</span> thePoppingView = self._subviews[i];
          thePoppingView.notify( <span class="hljs-string">"viewWillDisappear"</span> );
          <span class="hljs-keyword">if</span> ( i === <span class="hljs-number">0</span> ) {
            thePoppingView.element.classList.remove( <span class="hljs-string">"ui-root-view"</span> );
          }
          thePoppingView.parentElement = <span class="hljs-literal">null</span>;
          thePoppingView.notify( <span class="hljs-string">"viewDidDisappear"</span> );
          thePoppingView.notify( <span class="hljs-string">"viewWasPopped"</span> );
          <span class="hljs-keyword">delete</span> thePoppingView.navigationController;
        }
        self._subviews = [];
      }
      self._subviews.push( theNewRoot ); <span class="hljs-comment">// add it to our views</span>
      theNewRoot.navigationController = self;
      theNewRoot.notify( <span class="hljs-string">"viewWasPushed"</span> );
      theNewRoot.notify( <span class="hljs-string">"viewWillAppear"</span> ); <span class="hljs-comment">// notify the view</span>
      theNewRoot.parentElement = self.element; <span class="hljs-comment">// and make us the parent</span>
      theNewRoot.element.classList.add( <span class="hljs-string">"ui-root-view"</span> );
      theNewRoot.notify( <span class="hljs-string">"viewDidAppear"</span> ); <span class="hljs-comment">// and notify it that it's actually there.</span>
    };
    self.defineProperty( <span class="hljs-string">"rootView"</span>, {
      read:            <span class="hljs-literal">true</span>,
      write:           <span class="hljs-literal">true</span>,
      backingVariable: <span class="hljs-literal">false</span>
    } );
    self.defineProperty( <span class="hljs-string">"modal"</span>, {
      read:    <span class="hljs-literal">true</span>,
      write:   <span class="hljs-literal">false</span>,
      <span class="hljs-keyword">default</span>: <span class="hljs-literal">false</span>
    } );
    self.defineProperty( <span class="hljs-string">"modalView"</span>, {
      read:    <span class="hljs-literal">true</span>,
      write:   <span class="hljs-literal">false</span>,
      <span class="hljs-keyword">default</span>: <span class="hljs-literal">null</span>
    } );
    self.defineProperty( <span class="hljs-string">"modalViewType"</span>, {
      read:    <span class="hljs-literal">true</span>,
      write:   <span class="hljs-literal">false</span>,
      <span class="hljs-keyword">default</span>: <span class="hljs-string">""</span>
    } );
    self._modalClickPreventer = <span class="hljs-literal">null</span>;
    self._preventClicks = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">/**
     * Creates a click-prevention element -- essentially a transparent DIV that
     * fills the screen.
     * @method _createClickPreventionElement
     * @private
     */</span>
    self._createClickPreventionElement = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      self.createElementIfNotCreated();
      self._preventClicks = <span class="hljs-built_in">document</span>.createElement( <span class="hljs-string">"div"</span> );
      self._preventClicks.className = <span class="hljs-string">"ui-prevent-clicks"</span>;
      self.element.appendChild( self._preventClicks );
    };
    <span class="hljs-comment">/**
     * Create a click-prevention element if necessary
     * @method _createClickPreventionElementIfNotCreated
     * @private
     */</span>
    self._createClickPreventionElementIfNotCreated = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">if</span> ( self._preventClicks === <span class="hljs-literal">null</span> ) {
        self._createClickPreventionElement();
      }
    };
    <span class="hljs-comment">/**
     * push a view onto the view stack.
     *
     * @method pushView
     * @param {ViewContainer} aView
     * @param {Boolean} [withAnimation] Determine if the view should be pushed with an animation, default is `true`
     * @param {Number} [withDelay] Number of seconds for the animation, default is `0.3`
     * @param {String} [withType] CSS Animation, default is `ease-in-out`
     */</span>
    self.pushView = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( aView, withAnimation, withDelay, withType )</span> </span>{
      <span class="hljs-keyword">var</span> theHidingView = self.topView,
        theShowingView = aView,
        usingAnimation = <span class="hljs-literal">true</span>,
        animationDelay = <span class="hljs-number">0.3</span>,
        animationType = <span class="hljs-string">"ease-in-out"</span>;
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withAnimation !== <span class="hljs-string">"undefined"</span> ) {
        usingAnimation = withAnimation;
      }
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withDelay !== <span class="hljs-string">"undefined"</span> ) {
        animationDelay = withDelay;
      }
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withType !== <span class="hljs-string">"undefined"</span> ) {
        animationType = withType;
      }
      <span class="hljs-keyword">if</span> ( !usingAnimation ) {
        animationDelay = <span class="hljs-number">0</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>add the view to our array, at the end</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self._subviews.push( theShowingView );
      theShowingView.navigationController = self;
      theShowingView.notify( <span class="hljs-string">"viewWasPushed"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>get each element’s z-index, if specified</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> theHidingViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( theHidingView.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> ),
        theShowingViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( theShowingView.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> );
      <span class="hljs-keyword">if</span> ( theHidingViewZ &gt;= theShowingViewZ ) {
        theShowingViewZ = theHidingViewZ + <span class="hljs-number">10</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>then position the view so as to be off-screen, with the current view on screen</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      UI.styleElement( theHidingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(0,0,"</span> + theHidingViewZ + <span class="hljs-string">"px)"</span> );
      UI.styleElement( theShowingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(100%,0,"</span> + theShowingViewZ + <span class="hljs-string">"px)"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>set up an animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> ( usingAnimation ) {
        UI.styleElements( [theShowingView.element, theHidingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-webkit-transform "</span> +
                                                                                         animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [theShowingView.element, theHidingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-moz-transform "</span> +
                                                                                         animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [theShowingView.element, theHidingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-ms-transform "</span> +
                                                                                         animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [theShowingView.element, theHidingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"transform "</span> + animationDelay +
                                                                                         <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( theHidingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"opacity "</span> +
                                                                                                          animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"opacity "</span> +
                                                                                                           animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( theHidingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"0"</span> );
      } <span class="hljs-keyword">else</span> {
        UI.styleElements( [theShowingView.element, theHidingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
        UI.styleElements( theHidingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>and add the element with us as the parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      theShowingView.parentElement = self.element;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>display the click prevention element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self._preventClicks.style.display = <span class="hljs-string">"block"</span>;
      setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>tell the topView to move over to the left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        UI.styleElement( theHidingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(-50%,0,"</span> + theHidingViewZ + <span class="hljs-string">"px)"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>and tell our new view to move as well</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        UI.styleElement( theShowingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(0,0,"</span> + theShowingViewZ + <span class="hljs-string">"px)"</span> );
        <span class="hljs-keyword">if</span> ( usingAnimation ) {
          UI.styleElements( theHidingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"0"</span> );
          UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>the the view it’s about to show…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        theHidingView.notify( <span class="hljs-string">"viewWillDisappear"</span> );
        theShowingView.notify( <span class="hljs-string">"viewWillAppear"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>tell anyone who is listening who got pushed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        self.notify( <span class="hljs-string">"viewPushed"</span>, [theShowingView] );</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>tell the view it’s visible after the delay has passed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
          theHidingView.element.style.display = <span class="hljs-string">"none"</span>;
          theHidingView.notify( <span class="hljs-string">"viewDidDisappear"</span> );
          theShowingView.notify( <span class="hljs-string">"viewDidAppear"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>hide click preventer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          self._preventClicks.style.display = <span class="hljs-string">"none"</span>;
        }, animationDelay * <span class="hljs-number">1000</span> );
      }, <span class="hljs-number">50</span> );
    };
    <span class="hljs-comment">/**
     * pops the top view from the view stack
     *
     * @method popView
     * @param {Boolean} withAnimation Use animation when popping, default `true`
     * @param {String} withDelay Duration of animation in seconds, Default `0.3`
     * @param {String} withType CSS Animation, default is `ease-in-out`
     */</span>
    self.popView = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( withAnimation, withDelay, withType )</span> </span>{
      <span class="hljs-keyword">var</span> usingAnimation = <span class="hljs-literal">true</span>,
        animationDelay = <span class="hljs-number">0.3</span>,
        animationType = <span class="hljs-string">"ease-in-out"</span>;
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withAnimation !== <span class="hljs-string">"undefined"</span> ) {
        usingAnimation = withAnimation;
      }
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withDelay !== <span class="hljs-string">"undefined"</span> ) {
        animationDelay = withDelay;
      }
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> withType !== <span class="hljs-string">"undefined"</span> ) {
        animationType = withType;
      }
      <span class="hljs-keyword">if</span> ( !usingAnimation ) {
        animationDelay = <span class="hljs-number">0</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>only pop if we have views to pop (Can’t pop the first!)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> ( self._subviews.length &lt;= <span class="hljs-number">1</span> ) {
        <span class="hljs-keyword">return</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>pop the top view off the stack</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> thePoppingView = self._subviews.pop(),
        theShowingView = self.topView,
        thePoppingViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( thePoppingView.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> ),
        theShowingViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( theShowingView.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> );
      <span class="hljs-keyword">if</span> ( theShowingViewZ &gt;= thePoppingViewZ ) {
        thePoppingViewZ = theShowingViewZ + <span class="hljs-number">10</span>;
      }
      theShowingView.element.style.display = <span class="hljs-string">"inherit"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>make sure that theShowingView is off screen to the left, and the popping
view is at 0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      UI.styleElements( [thePoppingView.element, theShowingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
      UI.styleElements( thePoppingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
      UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"inherit"</span> );
      UI.styleElement( theShowingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(-50%,0,"</span> + theShowingViewZ + <span class="hljs-string">"px)"</span> );
      UI.styleElement( thePoppingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(0,0,"</span> + thePoppingViewZ + <span class="hljs-string">"px"</span> );
      <span class="hljs-keyword">if</span> ( usingAnimation ) {
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"0"</span> );
        UI.styleElements( thePoppingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
      } <span class="hljs-keyword">else</span> {
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
        UI.styleElements( thePoppingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>set up an animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> ( usingAnimation ) {
        UI.styleElements( [thePoppingView.element, theShowingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-webkit-transform "</span> +
                                                                                          animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [thePoppingView.element, theShowingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-moz-transform "</span> +
                                                                                          animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [thePoppingView.element, theShowingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"-ms-transform "</span> +
                                                                                          animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( [thePoppingView.element, theShowingView.element], <span class="hljs-string">"transition"</span>, <span class="hljs-string">"transform "</span> + animationDelay +
                                                                                          <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( thePoppingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"opacity "</span> +
                                                                                                           animationDelay + <span class="hljs-string">"s "</span> + animationType );
        UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"transition"</span>, <span class="hljs-string">"opacity "</span> +
                                                                                                           animationDelay + <span class="hljs-string">"s "</span> + animationType );
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>display the click prevention element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self._preventClicks.style.display = <span class="hljs-string">"block"</span>;
      setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>and move everyone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        UI.styleElement( theShowingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(0,0,"</span> + theShowingViewZ + <span class="hljs-string">"px)"</span> );
        UI.styleElement( thePoppingView.element, <span class="hljs-string">"transform"</span>, <span class="hljs-string">"translate3d(100%,0,"</span> + thePoppingViewZ + <span class="hljs-string">"px)"</span> );
        <span class="hljs-keyword">if</span> ( usingAnimation ) {
          UI.styleElements( thePoppingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"0"</span> );
          UI.styleElements( theShowingView.element.querySelectorAll( <span class="hljs-string">".ui-navigation-bar *"</span> ), <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"1"</span> );
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>the the view it’s about to show…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        thePoppingView.notify( <span class="hljs-string">"viewWillDisappear"</span> );
        theShowingView.notify( <span class="hljs-string">"viewWillAppear"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>tell the view it’s visible after the delay has passed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
          thePoppingView.notify( <span class="hljs-string">"viewDidDisappear"</span> );
          thePoppingView.notify( <span class="hljs-string">"viewWasPopped"</span> );
          theShowingView.notify( <span class="hljs-string">"viewDidAppear"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>tell anyone who is listening who got popped</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          self.notify( <span class="hljs-string">"viewPopped"</span>, [thePoppingView] );</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>hide click preventer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          self._preventClicks.style.display = <span class="hljs-string">"none"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>and remove the popping view from the hierarchy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          thePoppingView.parentElement = <span class="hljs-literal">null</span>;
          <span class="hljs-keyword">delete</span> thePoppingView.navigationController;
        }, ( animationDelay * <span class="hljs-number">1000</span> ) );
      }, <span class="hljs-number">50</span> );
    };
    <span class="hljs-comment">/**
     * Presents the navigation controller as a modal navigation controller. It sits
     * adjacent to `fromView` in the DOM, not within, and as such can prevent it
     * from receiving any events. The rendering is rougly the same as any other
     * navigation controller, save that an extra class added to the element's
     * `ui-container` that ensures that on larger displays the modal doesn't
     * fill the entire screen. If desired, this class can be controlled by the second
     * parameter (`options`).
     *
     * if `options` are specified, it must be of the form:
     * ```
     * { displayType: "modalWindow|modalPage|modalFill",   // modal display type
       *   withAnimation: true|false,                        // should animation be used?
       *   withDelay: 0.3,                                   // if animation is used, time in seconds
       *   withTimingFunction: "ease-in-out|..."             // timing function to use for animation
       * }
     * ```
     *
     * @method presentModalController
     * @param {Node} fromView                      the top-level view to cover (typically rootContainer)
     * @param {*} options                          options to apply
     */</span>
    self.presentModalController = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">presentModelController</span><span class="hljs-params">( fromView, options )</span> </span>{
      <span class="hljs-keyword">var</span> defaultOpts = {
        displayType:        <span class="hljs-string">"modalWindow"</span>,
        withAnimation:      <span class="hljs-literal">true</span>,
        withDelay:          <span class="hljs-number">0.3</span>,
        withTimingFunction: <span class="hljs-string">"ease-in-out"</span>
      };
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">"undefined"</span> ) {
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.displayType !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.displayType = options.displayType;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withAnimation !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withAnimation = options.withAnimation;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withDelay !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withDelay = options.withDelay;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withTimingFunction !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withTimingFunction = options.withTimingFunction;
        }
      }
      <span class="hljs-keyword">if</span> ( !defaultOpts.withAnimation ) {
        defaultOpts.withDelay = <span class="hljs-number">0</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>check our form factor class; if we’re a phone, only permit modalFill</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">document</span>.body.classList.contains( <span class="hljs-string">"phone"</span> ) ) {
        defaultOpts.displayType = <span class="hljs-string">"modalFill"</span>;
      }
      self._modalView = fromView;
      self._modal = <span class="hljs-literal">true</span>;
      self._modalViewType = defaultOpts.displayType;
      self._modalClickPreventer = <span class="hljs-built_in">document</span>.createElement( <span class="hljs-string">"div"</span> );
      self._modalClickPreventer.className = <span class="hljs-string">"ui-container ui-transparent"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>we need to calculate the z indices of the adjacent view and us</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> theAdjacentViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( fromView ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> ),
        theModalViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( self.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> );
      <span class="hljs-keyword">if</span> ( theModalViewZ &lt;= theAdjacentViewZ ) {
        theModalViewZ = theAdjacentViewZ + <span class="hljs-number">10</span>; <span class="hljs-comment">// the modal should always be above the adjacent view</span>
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>make sure our current view is off-screen so that when it is added, it won’t flicker</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self.element.$s( <span class="hljs-string">"transform"</span>, UTIL.template( <span class="hljs-string">"translate3d(%X%,%Y%,%Z%)"</span>, {
        x: <span class="hljs-string">"0"</span>,
        y: <span class="hljs-string">"150%"</span>,
        z: <span class="hljs-string">""</span> + theModalViewZ + <span class="hljs-string">"px"</span>
      } ) );
      self.element.classList.add( defaultOpts.displayType );</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>and attach the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self._modalClickPreventer.appendChild( self.element );
      fromView.parentNode.appendChild( self._modalClickPreventer );</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>send any notifications we need</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self.emit( <span class="hljs-string">"viewWasPushed"</span> );
      self.emit( <span class="hljs-string">"viewWillAppear"</span> );
      setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        fromView.classList.add( <span class="hljs-string">"ui-disabled"</span> );
        UI.beginAnimation( fromView ).setTiming( defaultOpts.withDelay ).setTimingFunction( defaultOpts.withTimingFunction )
          .scale( <span class="hljs-string">"0.9"</span> ).opacity( <span class="hljs-string">"0.9"</span> ).endAnimation();
        UI.beginAnimation( self.element ).setTiming( defaultOpts.withDelay ).setTimingFunction( defaultOpts.withTimingFunction )
          .translate3d( <span class="hljs-string">"0"</span>, <span class="hljs-string">"0"</span>, <span class="hljs-string">""</span> + theModalViewZ + <span class="hljs-string">"px"</span> ).endAnimation( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendNotifications</span><span class="hljs-params">()</span> </span>{
                                                                              self.emit( <span class="hljs-string">"viewDidAppear"</span> );
                                                                            } );
      }, <span class="hljs-number">50</span> );
    };
    <span class="hljs-comment">/**
     * Dismiss a controller presented with `presentModelController`. Options can be
     *
     * ```
     * { withAnimation: true|false,         // if false, no animation occurs
       *   withDelay: 0.3,                    // time in seconds
       *   withTimingFunction: "ease-in-out"  // easing function to use
       * }
     * ```
     *
     * @method dismissModalController
     * @param {*} options
     */</span>
    self.dismissModalController = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dismissModelController</span><span class="hljs-params">( options )</span> </span>{
      <span class="hljs-keyword">var</span> defaultOpts = {
        withAnimation:      <span class="hljs-literal">true</span>,
        withDelay:          <span class="hljs-number">0.3</span>,
        withTimingFunction: <span class="hljs-string">"ease-in-out"</span>
      };
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">"undefined"</span> ) {
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withAnimation !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withAnimation = options.withAnimation;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withDelay !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withDelay = options.withDelay;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.withTimingFunction !== <span class="hljs-string">"undefined"</span> ) {
          defaultOpts.withTimingFunction = options.withTimingFunction;
        }
      }
      <span class="hljs-keyword">if</span> ( !defaultOpts.withAnimation ) {
        defaultOpts.withDelay = <span class="hljs-number">0</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>we need to calculate the z indices of the adjacent view and us</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> theAdjacentViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( self.modalView ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> ),
        theModalViewZ = <span class="hljs-built_in">parseInt</span>( getComputedStyle( self.element ).getPropertyValue( <span class="hljs-string">"z-index"</span> ) || <span class="hljs-string">"0"</span>, <span class="hljs-number">10</span> );
      <span class="hljs-keyword">if</span> ( theModalViewZ &lt;= theAdjacentViewZ ) {
        theModalViewZ = theAdjacentViewZ + <span class="hljs-number">10</span>; <span class="hljs-comment">// the modal should always be above the adjacent view</span>
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>send any notifications we need</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self.emit( <span class="hljs-string">"viewWillDisappear"</span> );
      setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        self.modalView.classList.remove( <span class="hljs-string">"ui-disabled"</span> );
        UI.beginAnimation( self.modalView ).setTiming( defaultOpts.withDelay ).setTimingFunction( defaultOpts.withTimingFunction )
          .scale( <span class="hljs-string">"1"</span> ).opacity( <span class="hljs-string">"1"</span> ).endAnimation();
        UI.beginAnimation( self.element ).setTiming( defaultOpts.withDelay ).setTimingFunction( defaultOpts.withTimingFunction )
          .translate3d( <span class="hljs-string">"0"</span>, <span class="hljs-string">"150%"</span>, <span class="hljs-string">""</span> + theModalViewZ + <span class="hljs-string">"px"</span> ).endAnimation(
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendNotifications</span><span class="hljs-params">()</span> </span>{
            self.emit( <span class="hljs-string">"viewDidDisappear"</span> );
            self.emit( <span class="hljs-string">"viewWasPopped"</span> );
            self.element.classList.remove( self.modalViewType );
            self._modalClickPreventer.parentNode.removeChild( self._modalClickPreventer );
            self._modalClickPreventer.removeChild( self.element );
            self._modal = <span class="hljs-literal">false</span>;
            self._modalView = <span class="hljs-literal">null</span>;
            self._modalViewType = <span class="hljs-string">""</span>;
            self._modalClickPreventer = <span class="hljs-literal">null</span>;
          } );
      }, <span class="hljs-number">50</span> );
    };
    <span class="hljs-comment">/**
     * @method render
     * @abstract
     */</span>
    self.override( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// nothing to render!</span>
    } );
    <span class="hljs-comment">/**
     * Create elements and click prevention elements if necessary; otherwise there's nothing to do
     * @method renderToElement
     */</span>
    self.override( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderToElement</span><span class="hljs-params">()</span> </span>{
      self.createElementIfNotCreated();
      self._createClickPreventionElementIfNotCreated();
      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// nothing to do.</span>
    } );
    <span class="hljs-comment">/**
     * Initialize the navigation controller
     * @method init
     * @return {Object}
     */</span>
    self.override( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span><span class="hljs-params">( theRootView, theElementId, theElementTag, theElementClass, theParentElement )</span> </span>{
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> theRootView === <span class="hljs-string">"undefined"</span> ) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">"Can't initialize a navigation controller without a root view."</span> );
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>do what a normal view container does</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self.$super( theElementId, theElementTag, theElementClass, theParentElement );</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>self.super( _className, “init”, [theElementId, theElementTag, theElementClass, theParentElement ] );
now add the root view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self.rootView = theRootView;
      <span class="hljs-keyword">return</span> self;
    } );
    <span class="hljs-comment">/**
     * Initialize the navigation controller
     * @method initWithOptions
     * @return {Object}
     */</span>
    self.override( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initWithOptions</span><span class="hljs-params">( options )</span> </span>{
      <span class="hljs-keyword">var</span> theRootView, theElementId, theElementTag, theElementClass,
        theParentElement;
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">"undefined"</span> ) {
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.id !== <span class="hljs-string">"undefined"</span> ) {
          theElementId = options.id;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.tag !== <span class="hljs-string">"undefined"</span> ) {
          theElementTag = options.tag;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.class !== <span class="hljs-string">"undefined"</span> ) {
          theElementClass = options.class;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.parent !== <span class="hljs-string">"undefined"</span> ) {
          theParentElement = options.parent;
        }
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options.rootView !== <span class="hljs-string">"undefined"</span> ) {
          theRootView = options.rootView;
        }
      }
      <span class="hljs-keyword">return</span> self.init( theRootView, theElementId, theElementTag, theElementClass, theParentElement );
    } );</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>handle auto initialization</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self._autoInit.apply( self, <span class="hljs-built_in">arguments</span> );
    <span class="hljs-keyword">return</span> self;
  };
<span class="hljs-built_in">module</span>.exports = NavigationController;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
